{% macro simpleTypes(simpleFields) %}
{%for f in simpleFields %}
{{f.code}} : {
    type: "{{f.type}}";
    value: string;
}{{";" if not loop.last}}
{% endfor %}
{%endmacro%}

{%macro stringListTypes(stringListFields) %}
{% for s in stringListFields %}
{{s.code}} : {
    type: "{{s.type}}";
    value : string[];
}{{";" if not loop.last}}
{% endfor %}
{% endmacro %}

{% macro userFieldTypes(userFields) %}
{% for u in userFields %}
{{u.code}} : {
    type: "{{u.type}}";
    value: {code: string, name: string};
}{{";" if not loop.last}}
{% endfor %}
{%endmacro%}

{%macro userListFieldType(userListFields) %}
{% for u in userListFields %}
{{u.code}} : {
    type: "{{u.type}}";
    value: {code: string, name: string}[];
}{{";" if not loop.last}}
{% endfor %}
{%endmacro%}

{%macro fileFieldTypes(fileTypeFields) %}
{% for f in fileTypeFields %}
{{f.code}} : {
    type: "{{f.type}}";
    value: {
        contentType: string;
        fileKey: string;
        name: string;
        size: string;
    }[];
}{{";" if not loop.last}}
{% endfor %}
{%endmacro%}

{%macro flatTypes(simpleFields, userFields, stringListFields, userListFields, fileTypeFields) %}
{{simpleTypes(simpleFields) }}

{{ ";" if stringListFields | length }}
{{ stringListTypes(stringListFields) }}

{{ ";" if userFields | length }}
{{userFieldTypes(userFields) }}

{{ ";" if userListFields | length }}
{{userListFieldType(userListFields) }}

{{ ";" if fileTypeFields | length }}
{{fileFieldTypes(fileTypeFields) }}
{%endmacro%}
/**
 * This type definition is auto-generated.
 * If you update kintone form settings, Please regenerate this type definition
 */
declare namespace {{namespace}} {
    interface {{typeName}} {

        {{flatTypes(simpleFields, userFields, stringListFields, userListFields, fileTypeFields) }}
        {{";" if subTableFields | length }}

        {% for subTableField in subTableFields %}
        {{subTableField.code}} : {
            type: "{{subTableField.type}}";
            value: {
                id: string;
                value: {                  
                    {{ flatTypes(subTableField.fields.simpleFields,
                                 subTableField.fields.userFields,
                                 subTableField.fields.stringListFields,
                                 subTableField.fields.userListFields,
                                 subTableField.fields.fileTypeFields) }}
                };
            }[];
        }{{";" if not loop.last}}
        {% endfor %}
    }

    interface {{savedTypeName}} extends {{typeName}} {
        $id : {
            type: "__ID__";
            value: string;
        };
        $revision: {
            type: "__REVISION__";
            value: string;
        };
    }
};
